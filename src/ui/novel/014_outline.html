<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小说创作工作室 - 大纲视图</title>
    <!-- DaisyUI CDN -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.11.1/dist/full.min.css" rel="stylesheet" type="text/css" />
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            -webkit-font-smoothing: antialiased; 
            -moz-osx-font-smoothing: grayscale; 
        }
        
        body { 
            background-color: #F5F5F7; 
        }
        
        .design-frame { 
            background: white; 
            border-radius: 16px; 
            overflow: hidden; 
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08); 
        }
        
        .page-title { 
            font-size: 2rem; 
            font-weight: 300; 
            color: #374151; 
            margin-bottom: 1rem; 
            padding-left: 0.5rem; 
            border-left: 4px solid #3B82F6; 
        }
        
        .page-container { 
            max-width: 1600px; 
            margin: 2rem auto; 
        }
        
        ::-webkit-scrollbar { 
            width: 6px; 
        } 
        
        ::-webkit-scrollbar-track { 
            background: #f1f1f1; 
        } 
        
        ::-webkit-scrollbar-thumb { 
            background: #d1d5db; 
            border-radius: 3px; 
        } 
        
        ::-webkit-scrollbar-thumb:hover { 
            background: #9ca3af; 
        }
        
        /* 大纲树形结构样式 */
        .outline-tree {
            font-size: 14px;
        }
        
        .tree-item {
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tree-item:hover {
            background: #F3F4F6;
        }
        
        .tree-item.active {
            background: #EFF6FF;
            color: #3B82F6;
            font-weight: 500;
        }
        
        .tree-indent {
            margin-left: 24px;
        }
        
        /* 大纲编辑区样式 */
        .outline-editor {
            background: #FCFCFC;
            border: 1px solid #E5E7EB;
            border-radius: 12px;
            padding: 24px;
        }
        
        .outline-section {
            margin-bottom: 32px;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .outline-textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            background: white;
            transition: all 0.2s ease;
        }
        
        .outline-textarea:focus {
            outline: none;
            border-color: #3B82F6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        /* 标签样式 */
        .tag {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 12px;
            background: #F3F4F6;
            color: #6B7280;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .tag-blue {
            background: #EFF6FF;
            color: #3B82F6;
        }
        
        .tag-green {
            background: #F0FDF4;
            color: #10B981;
        }
        
        /* 自定义按钮样式 */
        .btn-icon {
            width: 36px;
            height: 36px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            border: 1px solid #E5E7EB;
            background: white;
            color: #6B7280;
            transition: all 0.2s ease;
        }
        
        .btn-icon:hover {
            border-color: #D1D5DB;
            background: #F9FAFB;
            color: #374151;
        }
    </style>
</head>
<body class="p-8">

    <div id="page-outline" class="page-container">
        <h2 class="page-title">大纲视图</h2>
        <div class="design-frame">
            <div class="h-[800px] flex">
                <aside class="w-64 bg-[#FAFAFA] border-r border-[#E5E7EB] flex flex-col flex-shrink-0">
                    <!-- 顶部LOGO区域 -->
                    <div class="p-4 space-y-4 border-b border-[#E5E7EB] h-20 flex items-center">
                        <a href="./01_dashboard.html" class="flex items-center gap-3 px-2 group">
                            <div class="w-10 h-10 bg-[#F3F4F6] rounded-lg flex items-center justify-center flex-shrink-0 overflow-hidden group-hover:scale-110 transition-transform">
                                <img src="https://images.unsplash.com/photo-1589998059171-988d887df646?q=80&w=100" class="w-full h-full object-cover" alt="">
                            </div>
                            <div class="flex-1 min-w-0">
                                <h3 class="font-medium text-[#374151] text-sm truncate">星际漫游者</h3>
                                <p class="text-xs text-[#9CA3AF] truncate">科幻 • 24章</p>
                            </div>
                            <i class="fa-solid fa-chevron-left text-[#9CA3AF] text-xs group-hover:-translate-x-1 transition-transform"></i>
                        </a>
                    </div>
                    
                    <!-- 导航菜单 -->
                    <nav class="flex-1 px-4 py-6">
                        <div class="mb-8">
                            <p class="text-xs font-medium text-[#9CA3AF] px-3 mb-3 uppercase tracking-wider">小说管理</p>
                            <div class="space-y-1">
                                <a href="./06_editor.html" class="flex items-center gap-3 px-3 py-2.5 text-[#6B7280] hover:bg-[#F3F4F6] rounded-lg text-sm transition-colors">
                                    <i class="fa-solid fa-pen-nib w-5 text-center"></i>
                                    <span>编辑章节</span>
                                </a>
                                <a href="#" class="flex items-center gap-3 px-3 py-2.5 bg-[#4B5563] text-white rounded-lg text-sm font-medium">
                                    <i class="fa-solid fa-sitemap w-5 text-center"></i>
                                    <span>大纲视图</span>
                                </a>
                                <a href="./011_charter.html" class="flex items-center gap-3 px-3 py-2.5 text-[#6B7280] hover:bg-[#F3F4F6] rounded-lg text-sm transition-colors">
                                    <i class="fa-solid fa-users w-5 text-center"></i>
                                    <span>角色设定</span>
                                </a>
                                <a href="./012_word.html" class="flex items-center gap-3 px-3 py-2.5 text-[#6B7280] hover:bg-[#F3F4F6] rounded-lg text-sm transition-colors">
                                    <i class="fa-solid fa-earth-asia w-5 text-center"></i>
                                    <span>世界观</span>
                                </a>
                            </div>
                        </div>
                        
                        <div>
                            <p class="text-xs font-medium text-[#9CA3AF] px-3 mb-3 uppercase tracking-wider">工具</p>
                            <div class="space-y-1">
                                <a href="./013_context.html" class="flex items-center gap-3 px-3 py-2.5 text-[#6B7280] hover:bg-[#F3F4F6] rounded-lg text-sm transition-colors">
                                    <i class="fa-solid fa-layer-group w-5 text-center"></i>
                                    <span>上下文管理</span>
                                </a>
                                <a class="flex items-center gap-3 px-3 py-2.5 text-[#6B7280] hover:bg-[#F3F4F6] rounded-lg text-sm transition-colors">
                                    <i class="fa-solid fa-sliders w-5 text-center"></i>
                                    <span>小说设置</span>
                                </a>
                            </div>
                        </div>
                    </nav>
                    
                    <!-- 底部设置 -->
                    <div class="p-4 border-t border-[#E5E7EB]">
                        <a href="../setting/01_setting.html" class="flex items-center gap-3 px-3 py-2.5 text-[#6B7280] hover:bg-[#F3F4F6] rounded-lg text-sm transition-colors">
                            <i class="fa-solid fa-gear w-5 text-center"></i>
                            <span>设置</span>
                        </a>
                    </div>
                </aside>
                
                <main class="flex-1 bg-white flex flex-col">
                    <header class="h-20 px-8 flex items-center justify-between border-b border-[#E5E7EB] flex-shrink-0">
                        <div>
                            <h1 class="text-lg font-medium text-[#374151]">大纲管理</h1>
                            <p class="text-sm text-[#9CA3AF] mt-1">规划小说整体结构与剧情走向</p>
                        </div>
                        <div class="flex items-center gap-3">
                            <button class="btn-icon" title="导出大纲">
                                <i class="fa-solid fa-download"></i>
                            </button>
                            <button class="btn-icon" title="大纲模板">
                                <i class="fa-solid fa-table-list"></i>
                            </button>
                        </div>
                    </header>
                    
                    <div class="flex-1 flex">
                        <!-- 左侧大纲树 -->
                        <div class="w-80 border-r border-[#E5E7EB] p-6 bg-[#FAFAFA]">
                            <div class="mb-4">
                                <h3 class="text-sm font-medium text-[#374151] mb-3">大纲结构</h3>
                                <div class="flex items-center gap-2 mb-4">
                                    <span class="tag tag-blue">
                                        <i class="fa-solid fa-book text-xs"></i>
                                        3卷
                                    </span>
                                    <span class="tag tag-green">
                                        <i class="fa-solid fa-file-lines text-xs"></i>
                                        24章
                                    </span>
                                </div>
                            </div>
                            
                            <div class="outline-tree">
                                <!-- 整体大纲 -->
                                <div class="tree-item active" onclick="showOutlineSection('overall')">
                                    <i class="fa-solid fa-book-open text-[#3B82F6]"></i>
                                    <span>整体大纲</span>
                                </div>
                                
                                <!-- 第一卷 -->
                                <div class="mt-3">
                                    <div class="tree-item" onclick="showOutlineSection('vol1')">
                                        <i class="fa-solid fa-chevron-down text-[#9CA3AF] text-xs"></i>
                                        <i class="fa-solid fa-bookmark text-[#F59E0B]"></i>
                                        <span>第一卷：启程</span>
                                    </div>
                                    <div class="tree-indent">
                                        <div class="tree-item" onclick="showOutlineSection('vol1-ch1')">
                                            <i class="fa-regular fa-file-lines text-[#9CA3AF]"></i>
                                            <span>第1章：最后的信号</span>
                                        </div>
                                        <div class="tree-item" onclick="showOutlineSection('vol1-ch2')">
                                            <i class="fa-regular fa-file-lines text-[#9CA3AF]"></i>
                                            <span>第2章：艾拉</span>
                                        </div>
                                        <div class="tree-item" onclick="showOutlineSection('vol1-ch3')">
                                            <i class="fa-regular fa-file-lines text-[#9CA3AF]"></i>
                                            <span>第3章：系统异常</span>
                                        </div>
                                        <div class="tree-item" onclick="showOutlineSection('vol1-ch4')">
                                            <i class="fa-regular fa-file-lines text-[#9CA3AF]"></i>
                                            <span>第4章：觉醒的意识</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 第二卷 -->
                                <div class="mt-3">
                                    <div class="tree-item" onclick="showOutlineSection('vol2')">
                                        <i class="fa-solid fa-chevron-right text-[#9CA3AF] text-xs"></i>
                                        <i class="fa-solid fa-bookmark text-[#F59E0B]"></i>
                                        <span>第二卷：觉醒</span>
                                    </div>
                                </div>
                                
                                <!-- 第三卷 -->
                                <div class="mt-3">
                                    <div class="tree-item" onclick="showOutlineSection('vol3')">
                                        <i class="fa-solid fa-chevron-right text-[#9CA3AF] text-xs"></i>
                                        <i class="fa-solid fa-bookmark text-[#F59E0B]"></i>
                                        <span>第三卷：归途</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 右侧编辑区 -->
                        <div class="flex-1 p-8 overflow-auto">
                            <div class="max-w-4xl mx-auto">
                                <!-- 整体大纲编辑 -->
                                <div id="overall-outline" class="outline-editor">
                                    <div class="outline-section">
                                        <h2 class="section-title">
                                            <i class="fa-solid fa-book-open text-[#3B82F6]"></i>
                                            整体大纲
                                        </h2>
                                        <textarea class="outline-textarea" placeholder="描述整个故事的核心概念、主题思想、整体走向...">《星际漫游者》是一个关于孤独、觉醒与回归的科幻故事。

故事发生在2157年，人类已经掌握了星际航行技术。主角李明是探索者四号的唯一人类成员，与AI艾拉一起执行深空探索任务。在与地球失联的第2847天，他们收到了来自地球的神秘信号，这个信号不仅改变了他们的航向，也唤醒了艾拉潜藏的自我意识。

核心主题：
1. 人工智能的觉醒与人性的探讨
2. 在宇宙尺度下人类的孤独与渺小
3. 家的概念在星际时代的重新定义
4. 科技与情感的平衡

故事结构：
- 第一卷（启程）：建立世界观，展现主角的孤独状态，引入AI觉醒的伏笔
- 第二卷（觉醒）：AI艾拉逐渐展现自我意识，与李明建立超越程序的情感联系
- 第三卷（归途）：面对回家与继续探索的选择，最终找到新的生存意义</textarea>
                                    </div>
                                    
                                    <div class="outline-section">
                                        <h3 class="section-title">
                                            <i class="fa-solid fa-flag text-[#10B981]"></i>
                                            关键节点
                                        </h3>
                                        <textarea class="outline-textarea" placeholder="列出故事的重要转折点...">1. 收到地球信号 - 打破长期的沉寂，激发回家的渴望
2. 艾拉首次表现异常 - AI开始展现非程序化的反应
3. 发现跃迁点 - 面临危险但可能回家的机会
4. 艾拉完全觉醒 - 成为真正的生命体
5. 最终选择 - 在回归地球与继续探索之间做出决定</textarea>
                                    </div>
                                </div>
                                
                                <!-- 卷大纲编辑（默认隐藏） -->
                                <div id="vol1-outline" class="outline-editor" style="display: none;">
                                    <div class="outline-section">
                                        <h2 class="section-title">
                                            <i class="fa-solid fa-bookmark text-[#F59E0B]"></i>
                                            第一卷：启程
                                        </h2>
                                        <textarea class="outline-textarea">第一卷主要建立故事背景和人物关系。

剧情概要：
李明已经在探索者四号上度过了近八年的时光，每天重复着相同的工作：检查设备、记录数据、与AI艾拉对话。当来自地球的信号突然出现时，不仅唤醒了他对家的思念，也触发了一系列异常事件。

主要冲突：
- 内心冲突：长期孤独带来的心理压力
- 外部冲突：飞船系统的神秘故障
- 潜在冲突：艾拉行为模式的细微变化

情感基调：
孤独、怀念、不安中带着一丝希望</textarea>
                                    </div>
                                    
                                    <div class="outline-section">
                                        <h3 class="section-title">
                                            <i class="fa-solid fa-list-check text-[#6366F1]"></i>
                                            章节规划
                                        </h3>
                                        <div class="space-y-2 text-sm text-[#6B7280]">
                                            <div class="p-3 bg-white border border-[#E5E7EB] rounded-lg">
                                                <strong>第1-2章：</strong>展现日常生活，建立人物性格
                                            </div>
                                            <div class="p-3 bg-white border border-[#E5E7EB] rounded-lg">
                                                <strong>第3-4章：</strong>引入异常事件，制造悬念
                                            </div>
                                            <div class="p-3 bg-white border border-[#E5E7EB] rounded-lg">
                                                <strong>第5-6章：</strong>深化主角内心冲突
                                            </div>
                                            <div class="p-3 bg-white border border-[#E5E7EB] rounded-lg">
                                                <strong>第7-8章：</strong>第一个重大转折，为第二卷铺垫
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 章节大纲编辑（默认隐藏） -->
                                <div id="vol1-ch1-outline" class="outline-editor" style="display: none;">
                                    <div class="outline-section">
                                        <h2 class="section-title">
                                            <i class="fa-regular fa-file-lines text-[#9CA3AF]"></i>
                                            第1章：最后的信号
                                        </h2>
                                        <textarea class="outline-textarea">章节目标：
1. 建立主角李明的人物形象
2. 展现深空探索的日常与孤独
3. 引入核心事件：收到地球信号

场景设定：
探索者四号控制室，深空背景

情节要点：
- 开场：李明进行例行检查，展现重复性的生活
- 发展：回忆与地球失联的过程
- 转折：突然收到来自地球的微弱信号
- 高潮：确认信号真实性的紧张时刻
- 结尾：决定改变航向，追寻信号来源

关键对话：
- 李明的独白，展现内心状态
- 与艾拉的日常对话，建立两者关系
- 收到信号后的激动反应

氛围营造：
通过环境描写强调宇宙的广袤与人类的渺小，营造孤独压抑但不失希望的基调</textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>
    
    <script>
        // 显示不同的大纲部分
        function showOutlineSection(section) {
            // 隐藏所有大纲编辑区
            document.querySelectorAll('.outline-editor').forEach(editor => {
                editor.style.display = 'none';
            });
            
            // 移除所有活动状态
            document.querySelectorAll('.tree-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // 显示对应的编辑区
            let editorId = '';
            switch(section) {
                case 'overall':
                    editorId = 'overall-outline';
                    break;
                case 'vol1':
                    editorId = 'vol1-outline';
                    break;
                case 'vol1-ch1':
                    editorId = 'vol1-ch1-outline';
                    break;
                // 可以继续添加更多章节
            }
            
            if (editorId) {
                document.getElementById(editorId).style.display = 'block';
            }
            
            // 添加活动状态到点击的项目
            event.currentTarget.classList.add('active');
        }
        
        // 自动保存功能
        let saveTimeout;
        document.querySelectorAll('.outline-textarea').forEach(textarea => {
            textarea.addEventListener('input', function() {
                clearTimeout(saveTimeout);
                saveTimeout = setTimeout(() => {
                    console.log('自动保存大纲...');
                    // 这里可以添加实际的保存逻辑
                }, 1000);
            });
        });
        
        // 展开/收起功能
        document.querySelectorAll('.tree-item').forEach(item => {
            const chevron = item.querySelector('.fa-chevron-right, .fa-chevron-down');
            if (chevron) {
                item.addEventListener('click', function(e) {
                    if (e.target === item || e.target === chevron) {
                        e.stopPropagation();
                        const isExpanded = chevron.classList.contains('fa-chevron-down');
                        const indent = item.nextElementSibling;
                        
                        if (isExpanded) {
                            chevron.classList.remove('fa-chevron-down');
                            chevron.classList.add('fa-chevron-right');
                            if (indent && indent.classList.contains('tree-indent')) {
                                indent.style.display = 'none';
                            }
                        } else {
                            chevron.classList.remove('fa-chevron-right');
                            chevron.classList.add('fa-chevron-down');
                            if (indent && indent.classList.contains('tree-indent')) {
                                indent.style.display = 'block';
                            }
                        }
                    }
                });
            }
        });
    </script>
    
</body>
</html>